<!doctype html>
<html lang="es" data-theme="dark">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Dashboard ‚Äî F.A.N.S</title>
  <link rel="stylesheet" href="assets/css/style.css" />
  <style>
    /* Ajustes visuales del dashboard (encima de tu style.css) */
    .topbar{position:sticky;top:0;z-index:40;display:flex;align-items:center;gap:10px;justify-content:space-between;padding:12px 16px;border-bottom:1px solid var(--card-border,rgba(255,255,255,.06));background:var(--bg,rgba(0,0,0,.35));backdrop-filter:blur(8px)}
    .brand{display:flex;align-items:center;gap:10px;font-weight:700}
    .brand img{width:28px;height:28px;border-radius:6px;object-fit:cover}
    .nav-pills{display:flex;gap:8px;align-items:center}
    .pill{padding:8px 12px;border-radius:12px;border:1px solid var(--card-border,rgba(255,255,255,.08));background:var(--card-bg,rgba(255,255,255,.04));}
    .pill.is-active{background:var(--brand-weak,rgba(22,163,74,.12));border-color:rgba(22,163,74,.35)}
    .theme-toggle{border:none;background:var(--card-bg,rgba(0,0,0,.25));padding:8px 10px;border-radius:12px;cursor:pointer}
    .btn-ghost{border:1px solid var(--card-border,rgba(255,255,255,.12));background:var(--card-bg,rgba(255,255,255,.04));padding:8px 12px;border-radius:12px;}

    .page{max-width:1100px;margin-inline:auto;padding:24px;display:grid;gap:16px}
    .section{display:grid;gap:10px}
    .section h2{font-size:20px}
    .card{background:var(--card-bg,rgba(255,255,255,.04));border:1px solid var(--card-border,rgba(255,255,255,.08));border-radius:16px;box-shadow:var(--card-shadow,0 10px 30px rgba(0,0,0,.20));}
    .card-body{padding:16px 16px}
    .muted{opacity:.8}

    /* Accesos r√°pidos */
    .quick{display:flex;flex-wrap:wrap;gap:12px;padding:12px}
    .quick .qbtn{border:0;border-radius:14px;padding:12px 16px;font-weight:600;cursor:pointer;
      background:linear-gradient(180deg,var(--brand,#16a34a),#0f8139);color:#fff;box-shadow:0 16px 40px rgba(22,163,74,.35)}
    .qbtn.secondary{background:linear-gradient(180deg,#334155,#0f172a);color:#dbeafe;border:1px solid rgba(148,163,184,.25);box-shadow:0 18px 32px rgba(2,6,23,.35)}

    /* Lista de comunicados */
    .list{display:grid}
    .item{display:grid;gap:6px;padding:12px 0;border-bottom:1px dashed var(--card-border,rgba(255,255,255,.08))}
    .item:last-child{border-bottom:0}
    .item .title{font-weight:700}
    .item .meta{font-size:12px;opacity:.8}

    /* Empty state */
    .empty{display:grid;place-items:center;gap:8px;padding:28px;text-align:center;color:var(--text-muted,#a1a1aa)}
    .empty small{opacity:.9}

    /* Footer suave */
    footer{padding:16px;text-align:center;opacity:.7;font-size:13px}

      /* GRID ‚Äúfuturista‚Äù */
.qgrid{
  display:grid; gap:14px; padding:16px;
  grid-template-columns: repeat(auto-fit, minmax(220px,1fr));
}

/* Card con glass, borde conic y glow al hover */
.qcard{
  position:relative; overflow:hidden; cursor:pointer;
  display:grid; gap:8px; align-content:start;
  padding:16px; border-radius:16px;
  color:var(--text,#e7e7e7);
  background:var(--card-bg,rgba(255,255,255,.05));
  border:1px solid var(--card-border,rgba(255,255,255,.10));
  backdrop-filter: blur(8px);
  box-shadow: var(--card-shadow,0 12px 40px rgba(0,0,0,.24));
  transition: transform .18s ease, box-shadow .18s ease, background .18s ease;
}

/* Borde con gradiente ‚Äúne√≥n‚Äù */
.qcard::before{
  content:""; position:absolute; inset:0; border-radius:inherit; padding:1px;
  background: conic-gradient(
    from 120deg,
    #22c55e, #06b6d4, #8b5cf6, #22c55e
  );
  -webkit-mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
  -webkit-mask-composite: xor; mask-composite: exclude;
  opacity:.22; pointer-events:none; transition: opacity .25s ease, filter .25s ease;
}

.qcard:hover{
  transform: translateY(-2px);
  box-shadow: 0 22px 48px rgba(34,197,94,.15), 0 6px 20px rgba(2,6,23,.45);
}
.qcard:hover::before{ opacity:.55; filter: drop-shadow(0 0 18px rgba(34,197,94,.45)); }
.qcard:active{ transform: translateY(0); }

/* Icono con c√°psula luminosa */
.qicon{
  width:44px;height:44px;border-radius:12px;display:grid;place-items:center;
  background:
    radial-gradient(120px 60px at -10% -10%, rgba(34,197,94,.35), transparent 60%),
    radial-gradient(90px 60px at 120% 120%, rgba(56,189,248,.25), transparent 60%),
    rgba(255,255,255,.06);
  border:1px solid rgba(255,255,255,.10);
  color:#c7f9cc;
}

/* T√≠tulos y subt√≠tulos */
.qtitle{font-weight:700;font-size:16px;letter-spacing:.2px}
.qsub{font-size:13px;opacity:.78}

/* === DASHBOARD ‚Äî Hero Moderno =================== */
.hero{
  position: relative;
  isolation: isolate;
  border-radius: 22px;
  padding: clamp(18px, 2.5vw, 28px);
  margin: 32px auto;
  max-width: 1100px;
  background:
    linear-gradient(180deg,
      color-mix(in oklab, var(--card-bg, rgba(255,255,255,.04)) 90%, transparent) 0%,
      transparent 100%);
  border: 1px solid var(--card-border, rgba(255,255,255,.09));
  box-shadow: 0 12px 40px rgba(0,0,0,.35);
  overflow: hidden;
}
.hero::after{
  /* grid sutil */
  content:"";
  position:absolute; inset:0;
  background:
    radial-gradient(1000px 600px at 5% -10%, color-mix(in oklab, var(--brand,#16a34a) 25%, transparent), transparent 55%),
    repeating-linear-gradient(0deg,
      rgba(255,255,255,.04), rgba(255,255,255,.04) 1px,
      transparent 1px, transparent 12px);
  opacity:.35; pointer-events:none;
}
.hero-bg{
  position:absolute; inset:-20%;
  background:
    radial-gradient(600px 300px at 15% 35%, color-mix(in oklab, var(--brand,#16a34a) 30%, transparent), transparent 60%),
    radial-gradient(500px 260px at 85% 65%, rgba(120,119,240,.25), transparent 55%);
  filter: blur(30px); opacity:.55; z-index:-1;
}

.hero-body{
  display:grid; gap:18px;
  grid-template-columns: 1fr;
}
@media (min-width: 900px){
  .hero-body{ grid-template-columns: 1.2fr .8fr; align-items: center; }
}

/* Tarjeta bienvenida */
.welcome-card{
  display:flex; align-items:center; gap:14px;
  padding: 18px 20px;
  border-radius: 16px;
  background: linear-gradient(180deg,
    color-mix(in oklab, var(--card-bg,rgba(255,255,255,.04)) 95%, transparent) 0%,
    rgba(0,0,0,.04) 100%);
  border: 1px solid var(--card-border, rgba(255,255,255,.10));
  box-shadow:
    0 10px 30px rgba(0,0,0,.35),
    inset 0 1px 0 rgba(255,255,255,.04);
}
.avatar{
  flex:0 0 auto;
  width:54px; height:54px; border-radius:14px;
  display:grid; place-items:center;
  font-weight:800; letter-spacing:.3px;
  background:
    radial-gradient(120% 120% at 30% 20%, #2ef2a7, #16a34a);
  color:#04130b; /* contraste sobre el verde */
  box-shadow: 0 10px 24px rgba(22,163,74,.35);
}
.welcome-title{
  margin:0; font-size: clamp(20px, 2.7vw, 28px);
  font-weight: 800; letter-spacing: .2px;
}
.welcome-sub{ margin:.25rem 0 0; opacity:.8 }
.welcome-sub .bullet{ opacity:.6; margin-right:.4rem }
.wave{ display:inline-block; transform-origin: 70% 70%; animation: wave 2.2s infinite ease-in-out }
@keyframes wave{
  0%{ transform: rotate(0) }
  10%{ transform: rotate(14deg) }
  20%{ transform: rotate(-8deg) }
  30%{ transform: rotate(12deg) }
  40%{ transform: rotate(-4deg) }
  50%{ transform: rotate(8deg) }
  60%,100%{ transform: rotate(0) }
}

/* Stats peque√±as a la derecha */
.stats{
  display:grid; gap:12px;
  grid-auto-flow: column; grid-auto-columns: 1fr;
}
.stat{
  display:flex; flex-direction:column; gap:6px;
  padding:14px 16px; text-decoration:none;
  border-radius:14px; border:1px solid var(--card-border, rgba(255,255,255,.10));
  background: linear-gradient(180deg,
    color-mix(in oklab, var(--card-bg,rgba(255,255,255,.04)) 90%, transparent) 0%,
    rgba(0,0,0,.03) 100%);
  box-shadow: 0 8px 24px rgba(0,0,0,.25), inset 0 1px 0 rgba(255,255,255,.04);
  transition: transform .18s ease, box-shadow .18s ease, border-color .18s;
  color: var(--text, #e7e7e7);
}
.stat:hover{
  transform: translateY(-3px);
  box-shadow: 0 16px 40px rgba(0,0,0,.35);
  border-color: color-mix(in oklab, var(--brand,#16a34a) 45%, var(--card-border, rgba(255,255,255,.10)));
}
.stat-label{ font-size:12px; opacity:.75 }
.stat-value{ font-size:20px; font-weight:800; letter-spacing:.3px }

/* Secciones inferiores (comunicados / accesos) ‚Äì m√°s ‚Äúsuaves‚Äù */
.section-card{
  background: linear-gradient(180deg,
    color-mix(in oklab, var(--card-bg,rgba(255,255,255,.04)) 92%, transparent) 0%,
    rgba(0,0,0,.03) 100%);
  border: 1px solid var(--card-border, rgba(255,255,255,.1));
  border-radius: 18px;
  padding: 18px;
  box-shadow: 0 12px 32px rgba(0,0,0,.30), inset 0 1px 0 rgba(255,255,255,.04);
}

/* Tarjetas de accesos r√°pidos uniformes */
.quick-grid{
  display:grid; gap:16px;
  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
}
.quick-item{
  border-radius:16px; padding:16px;
  border:1px solid var(--card-border, rgba(255,255,255,.10));
  background: linear-gradient(180deg,
    color-mix(in oklab, var(--card-bg,rgba(255,255,255,.04)) 90%, transparent) 0%,
    rgba(0,0,0,.03) 100%);
  box-shadow: 0 10px 28px rgba(0,0,0,.28), inset 0 1px 0 rgba(255,255,255,.04);
  transition: transform .18s ease, border-color .18s ease, box-shadow .18s ease;
}
.quick-item:hover{
  transform: translateY(-4px);
  border-color: color-mix(in oklab, var(--brand,#16a34a) 45%, var(--card-border, rgba(255,255,255,.10)));
  box-shadow: 0 16px 44px rgba(0,0,0,.36);
}
.quick-title{ font-weight:700; margin:.4rem 0 .15rem }
.quick-desc{ opacity:.75; font-size:.92rem }

/* ====== HERO COMPACT ====== */
.hero.compact{
  max-width: 1100px;            /* antes ~1100px */
  padding: clamp(10px, 1.6vw, 16px);
  margin: 20px auto 18px;
  border-radius: 18px;
}
.hero.compact .hero-body{
  gap: 12px;
  grid-template-columns: 1fr auto; /* texto + stats m√°s pegados */
}
@media (max-width: 900px){
  .hero.compact .hero-body{ grid-template-columns: 1fr; }
}

/* Tarjeta de bienvenida m√°s chica */
.hero.compact .welcome-card{
  padding: 12px 14px;
  border-radius: 14px;
}
.hero.compact .avatar{
  width: 44px; height: 44px; border-radius: 12px;
  font-size: 18px;
}
.hero.compact .welcome-title{
  font-size: clamp(18px, 2.1vw, 22px);
}
.hero.compact .welcome-sub{
  font-size: 13px;
}

/* Stats compactas */
.hero.compact .stats{
  gap: 10px;
  grid-auto-columns: minmax(120px, 1fr); /* m√°s angostas */
}
.hero.compact .stat{
  padding: 10px 12px;
  border-radius: 12px;
}
.hero.compact .stat-label{
  font-size: 11px;
  opacity: .7;
}
.hero.compact .stat-value{
  font-size: 16px;
  font-weight: 800;
}

/* Un poco menos de ‚Äúsombra‚Äù y blur general para que no se sienta tan pesado */
.hero.compact{
  box-shadow: 0 8px 26px rgba(0,0,0,.28);
}
.hero.compact .hero-bg{ filter: blur(24px); opacity:.45; }

/* ===== Hero m√°s BAJO (misma anchura) ===== */
.hero.short{
  /* altura objetivo: ajust√° a gusto (180‚Äì240px suele verse bien) */
  min-height: 200px;
  padding-block: 14px;      /* menos padding vertical */
  margin-block: 18px;       /* menos espacio alrededor */
  overflow: hidden;         /* recorta el glow si sobresale */
}

/* Alineaci√≥n y escala de contenidos para que entren c√≥modos */
.hero.short .hero-body{
  align-items: center;
  gap: 12px;
}

/* Tarjeta de bienvenida un toque m√°s compacta (sin afectar ancho) */
.hero.short .welcome-card{
  padding: 12px 16px;
  border-radius: 14px;
}

/* Stats m√°s bajas (no tocamos el ancho de la grilla) */
.hero.short .stat{
  padding: 10px 12px;
  border-radius: 12px;
}
.hero.short .stat-label{ font-size: 11px; opacity: .75; }
.hero.short .stat-value{ font-size: 16px; font-weight: 800; }

/* Asegura que el fondo/blur del hero ocupe la nueva altura */
.hero.short .hero-bg{ height: 100%; filter: blur(24px); opacity: .45; }

/* Si ten√≠as un min-height previo grande, este lo sobreescribe */
.hero, .hero.compact{ min-height: auto; } /* (opcional) */

  </style>
</head>
<body>
  <!-- PROTECCI√ìN: exige sesi√≥n de usuario -->
  <script type="module" src="js/guard.js" data-guard="user-only"></script>

  <header class="topbar">
    <div class="brand">
      <img src="assets/img/logo.jpg" alt="F.A.N.S" />
      <span>F.A.N.S <small style="opacity:.7">Cooperativa</small></span>
    </div>
    <div class="nav-pills">
      <a href="dashboard.html" class="chip chip--primary">Dashboard</a>
      <button id="themeToggle" class="theme-toggle" title="Cambiar tema"><span id="themeIcon">üåô</span></button>
      <button class="btn-ghost" type="button" data-logout>Salir</button>
    </div>
  </header>

  <main class="page">
    <!-- HERO / BIENVENIDA -->
    <section class="hero short">
      <div class="hero-bg"></div>
      <div class="hero-body">
        <div class="welcome-card">
          <div class="avatar" id="dashAvatar">U</div>
          <div class="welcome-copy">
            <h2 class="welcome-title">
              Hola, <span id="greetName">usuario</span> <span class="wave">üëã</span>
            </h2>
            <p class="welcome-sub">
              <span class="bullet">‚Äî</span>
              <span id="greetEmail" class="muted">user@fans.test</span>
            </p>
          </div>
        </div>

        <div class="stats">
          <a class="stat" href="horas.html">
            <span class="stat-label">Horas del mes</span>
            <span class="stat-value"><span id="dashHours">0</span><small> h</small> <span id="dashMinutes">0</span><small> m</small></span>
          </a>

          <a class="stat" href="reservas.html">
            <span class="stat-label">Reservas</span>
            <span class="stat-value" id="dashReservas">‚Äî</span>
          </a>

          <a class="stat" id="qaComprobantes" href="upload.html">
            <span class="stat-label">Comprobantes</span>
            <span class="stat-value" id="dashComprobantes">‚Äî</span>
          </a>
        </div>
      </div>
    </section>

    <!-- Comunicados -->
    <section class="section">
      <h2>Comunicados</h2>
      <div class="card">
        <div class="card-body">
          <div id="comunicadosEmpty" class="empty" style="display:none">
            <div>Sin comunicados.</div>
            <small>Cuando se publiquen avisos, aparecer√°n aqu√≠.</small>
          </div>
          <div id="comunicadosList" class="list"></div>
        </div>
      </div>
    </section>

    <!-- Accesos r√°pidos -->
    <section class="section">
      <h2>Accesos r√°pidos</h2>
      <div class="card">
        <div class="qgrid">
          <button class="qcard" data-href="reclamos.html">
            <span class="qicon" aria-hidden="true">
              <svg width="22" height="22" viewBox="0 0 24 24" fill="none"><path d="M21 7.5a6 6 0 0 1-8.1 5.6L6 20l-2-2 7-6.9A6 6 0 1 1 21 7.5Z" stroke="currentColor" stroke-width="1.5"/></svg>
            </span>
            <div class="qtitle">Reclamos</div>
            <div class="qsub">Report√° y segu√≠ tus tickets</div>
          </button>

          <button class="qcard" data-href="reservas.html">
            <span class="qicon" aria-hidden="true">
              <svg width="22" height="22" viewBox="0 0 24 24" fill="none"><rect x="3" y="5" width="18" height="16" rx="3" stroke="currentColor" stroke-width="1.5"/><path d="M3 9.5h18" stroke="currentColor" stroke-width="1.5"/></svg>
            </span>
            <div class="qtitle">Reservas</div>
            <div class="qsub">SUM, parrillero y m√°s</div>
          </button>

          <button class="qcard" data-href="upload.html">
            <span class="qicon" aria-hidden="true">
              <svg width="22" height="22" viewBox="0 0 24 24" fill="none"><path d="M6 3h12v18l-2-1.2-2 1.2-2-1.2-2 1.2-2-1.2-2 1.2V3Z" stroke="currentColor" stroke-width="1.5"/><path d="M8.5 8.5h7M8.5 12h7" stroke="currentColor" stroke-width="1.5"/></svg>
            </span>
            <div class="qtitle">Comprobantes</div>
            <div class="qsub">Sub√≠ y segu√≠ el estado</div>
          </button>

          <button class="qcard" data-href="horas.html">
            <span class="qicon" aria-hidden="true">
              <svg width="22" height="22" viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="9" stroke="currentColor" stroke-width="1.5"/><path d="M12 7v5l3 2" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/></svg>
            </span>
            <div class="qtitle">Registro de horas</div>
            <div class="qsub">Carg√° tus horas de trabajo</div>
          </button>
        </div>
      </div>
    </section>
  </main>

  <footer>¬© 2025 F.A.N.S Cooperativa.</footer>

  <!-- Tema -->
  <script>
    (function(){
      const KEY='fans_theme';
      const html=document.documentElement;
      const btn=document.getElementById('themeToggle');
      const icon=document.getElementById('themeIcon');
      function apply(t){ html.setAttribute('data-theme',t); try{localStorage.setItem(KEY,t)}catch{}; if(icon) icon.textContent=t==='dark'?'üåô':'‚òÄÔ∏è'; }
      apply(localStorage.getItem(KEY)||'dark');
      btn && btn.addEventListener('click',()=>apply(html.getAttribute('data-theme')==='dark'?'light':'dark'));
    })();
  </script>

  <!-- Navegaci√≥n de accesos r√°pidos -->
  <script>
    document.addEventListener('click', (e)=>{
      const btn = e.target.closest('[data-href]');
      if(btn){ location.href = btn.getAttribute('data-href'); }
    });
  </script>

  <!-- Logout / helpers -->
  <script src="js/session.js"></script>

  <!-- Datos del dashboard (debe usar fetch con credentials:'include') -->
  <script type="module" src="js/dashboard.js"></script>
</body>
</html>