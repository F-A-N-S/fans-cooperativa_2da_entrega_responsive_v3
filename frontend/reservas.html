<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Reservas ‚Äî F.A.N.S</title>
  <link rel="stylesheet" href="assets/css/style.css"/>

  <!-- Estilos m√≠nimos para la grilla -->
  <style>
    .slots-grid{display:grid;grid-template-columns:repeat(6,minmax(0,1fr));gap:8px;margin-top:10px}
    .slot{height:38px;border:1px solid var(--card-border,rgba(255,255,255,.12));border-radius:10px;
          display:grid;place-items:center;cursor:pointer;background:var(--input-bg,rgba(0,0,0,.25));user-select:none}
    .slot.active{outline:2px solid var(--brand,#16a34a);background:rgba(22,163,74,.15)}
    .slot.busy{background:rgba(220,53,69,.12);border-color:rgba(220,53,69,.25);cursor:not-allowed;opacity:.7}
    .card{background:var(--card-bg,rgba(255,255,255,.04));border:1px solid var(--card-border,rgba(255,255,255,.08));border-radius:16px}
    .card-body{padding:16px}
    .badge{padding:4px 8px;border-radius:999px;background:rgba(255,255,255,.08);font-size:12px}
  </style>
</head>
<body>

<!-- Guardia de sesi√≥n -->
<script src="js/guard.js?v=5" data-guard="user-only"></script>

<header class="appbar">
  <div class="container appbar-row">
    <div class="brand">
      <img src="assets/img/logo.jpg" alt="F.A.N.S"/>
      <span class="brand-text">F.A.N.S <small>Cooperativa</small></span>
    </div>
    <nav class="app-actions">
      <a href="dashboard.html" class="chip chip--primary">Dashboard</a>
      <button id="themeToggle" class="chip chip--icon" aria-label="Cambiar tema">üåô</button>
      <button class="chip chip--ghost" type="button" data-logout>Salir</button>
    </nav>
  </div>
  <script>
    (function(){
      const KEY='fans_theme', html=document.documentElement;
      function apply(t){ html.setAttribute('data-theme',t);
        const b=document.getElementById('themeToggle'); if(b) b.textContent=t==='dark'?'üåô':'‚òÄÔ∏è';
        try{localStorage.setItem(KEY,t)}catch(_){}
      }
      apply(localStorage.getItem(KEY)||'dark');
      document.addEventListener('click',e=>{
        if(e.target && e.target.id==='themeToggle'){
          apply(html.getAttribute('data-theme')==='dark'?'light':'dark');
        }
      });
    })();
  </script>
</header>

<main class="container" style="max-width:1100px">
  <header class="page-head">
    <h1>Solicitar reserva</h1>
    <p class="muted">Seleccion√° fecha y uno o m√°s intervalos de 30 minutos.</p>
  </header>

  <div style="display:grid;grid-template-columns:1fr 360px;gap:20px;align-items:flex-start">
    <!-- IZQUIERDA: Nueva reserva -->
    <form id="reservaForm" class="card" autocomplete="off" onsubmit="return false;">
      <div class="card-body">
        <h2 style="margin:0 0 10px">Nuevo pedido</h2>

        <div class="field" style="margin-bottom:10px">
          <label for="espacio">Espacio</label>
          <!-- Cambi√° los values por los IDs reales de tu tabla -->
          <select id="espacio" name="espacio" required
                  style="width:100%;height:42px;border-radius:10px;padding:0 10px">
            <option value="1">Sal√≥n de eventos</option>
            <option value="2">Parrillero</option>
          </select>
        </div>

        <div class="field" style="margin-bottom:10px">
          <label for="fecha">Fecha</label>
          <!-- Acepta yyyy-mm-dd; el JS tambi√©n soporta dd/mm/aaaa -->
          <input id="fecha" name="fecha" type="date" required
                 style="width:100%;height:42px;border-radius:10px;padding:0 10px;
                        border:1px solid var(--input-border,rgba(255,255,255,.12));
                        background:var(--input-bg,rgba(0,0,0,.25));color:var(--text,#e7e7e7)"/>
        </div>

        <div class="field">
          <label>Rango horario</label>
          <div id="slotsGrid" class="slots-grid" aria-live="polite"></div>
          <small style="opacity:.7;display:block;margin-top:6px">
            Seleccion√° el rango clickeando el inicio y el fin (bloques de 30 min).
          </small>
        </div>

        <div style="display:flex;gap:8px;margin-top:12px">
          <button id="btnDisponibilidad" class="btn" type="button">Ver disponibilidad</button>
          <button id="btnEnviarReserva" class="btn btn-primary" type="button">Enviar solicitud</button>
        </div>
      </div>
    </form>

    <!-- DERECHA: Mis solicitudes -->
    <section class="card">
      <div class="card-body">
        <h2 style="margin:0 0 10px">Mis solicitudes</h2>
        <div id="misSolicitudes">
          <div class="card"><div class="card-body" style="opacity:.7">Cargando‚Ä¶</div></div>
        </div>
      </div>
      <div class="card-body" style="border-top:1px solid var(--card-border,rgba(255,255,255,.08))">
        <button class="btn btn-danger" data-logout>Salir</button>
      </div>
    </section>
  </div>
</main>

<footer class="footer">
  <div class="container">
    <div class="footer-content">
      <p class="footer-text">¬© 2025 F.A.N.S Cooperativa.</p>
      <p class="footer-text">Hecho con ‚ù§Ô∏è para la comunidad.</p>
    </div>
  </div>
</footer>

<!-- Cargar el JS de reservas -->
<script defer src="js/reservas.js"></script>
</body>
</html>